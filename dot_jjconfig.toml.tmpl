[user]
name = "Sebastian Vilhelm Juhl"
email = "seb.vilhelm@gmail.com"

[signing]
behavior = "own"
backend = "ssh"
key = "{{ .github_signing_key }}"
backends.ssh.program = "/Applications/1Password.app/Contents/MacOS/op-ssh-sign"

[ui]
default-command = "log"
diff-formatter = ["difft", "--color=always", "$left", "$right"]

[merge-tools.diffconflicts]
program = "nvim"
merge-args = [
	"-c",
	"let g:jj_diffconflicts_marker_length=$marker_length",
	"-c",
	"JJDiffConflicts!",
	"$output",
	"$base",
	"$left",
	"$right",
]
merge-tool-edits-conflict-markers = true

[merge-tools.git]
program = "nvim"
merge-args = [
	"-d",
	"-c",
	"\"wincmd l\"",
	"-c\"norm ]c\"",
	"$left",
	"$output",
	"$right",
]
merge-tool-edits-conflict-markers = true

[fix.tools.gofmt]
patterns = ["glob:'**/*.go'"]
command = ["gofmt"]

[fix.tools.rustfmt]
command = ["rustfmt", "--emit", "stdout", "--edition", "2021"]
patterns = ["glob:'**/*.rs'"]

[fix.tools.prettier]
command = ["prettier", "--stdin-filepath", "$path"]
# run from node_modules:
#   command = ["node_modules/.bin/prettier", "--stdin-filepath", "$path"]
patterns = [
    "glob:'**/*.js'",
    "glob:'**/*.jsx'",
    "glob:'**/*.ts'",
    "glob:'**/*.tsx'",
    "glob:'**/*.json'",
    "glob:'**/*.html'",
    "glob:'**/*.md'",
    "glob:'**/*.css'",
    ]
